<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mobilecnc.unsubmitReasons.service.UnsubmitReasonDAO">
	
	<resultMap id="unsubmitReason" type="UnsubmitReason">
        <result property="unsubmitReasonID" column="unsubmitReasonID"/>
        <result property="description" column="description"/>
        <result property="entryDate" column="entryDate"/>
        <result property="entryBy" column="entryBy"/>
        <result property="lastModifyDate" column="lastModifyDate"/>
        <result property="lastModifyBy" column="lastModifyBy"/>
    </resultMap>
	
	
	<select id="getAllUnsubmitReasons" resultMap="unsubmitReason">  
		SELECT * FROM UnsubmitReasons; 
	</select>
	
	
	<!--Sambath Kakda-->
	
	<select id="getPagingRecord" resultMap="unsubmitReason"  parameterType="com.mobilecnc.helper.PagingCondition">SELECT  unsubmitReasonID, reason, description, entryDate, entryBy, lastModifyDate, lastModifyBy
		FROM VUnsubmitReasons WHERE RowNr BETWEEN #{start} AND #{end} ${where} ORDER BY ${sidx} ${sord}</select>
	
	<select id="getRecordCount" resultType="int" parameterType="com.mobilecnc.helper.PagingCondition" >
			SELECT COUNT(unsubmitReasonID) FROM UnsubmitReasons 
			<where>
				<if test="col != null"> 
					${col} ${oper} ${val}
				</if>
			</where> 
	</select>
		
	<select id="deleteUnsubmitReason" parameterType="java.lang.String">
		<![CDATA[
		DELETE FROM UnsubmitReasons
		WHERE unsubmitReasonID = #{unsubmitReasonID};			
		]]>
	</select>
		
	<select id="getUnsubmitReasonLists" resultMap="unsubmitReason">
		SELECT * FROM UnsubmitReasons;
	</select>
		
			<!--Sambath Kakda-->
		
		
	<select id="getUnsubmitReason" parameterType="java.lang.String" resultMap="unsubmitReason">
		SELECT * FROM UnsubmitReasons
		WHERE unsubmitReasonID = #{unsubmitReasonID};
	</select>
	
	<insert id="insertUnsubmitReason" >
		<![CDATA[
			INSERT INTO UnsubmitReasons
			(unsubmitReasonID, reason, description, entryDate, entryBy, lastModifyBy, lastModifyDate)
			VALUES
			( #{unsubmitReasonID}, #{reason}, #{description}, getdate(), #{entryBy}, #{lastModifyBy}, getdate())			
		]]>
	</insert>
	
	<update id="updateUnsubmitReason" parameterType="unsubmitReason">
		UPDATE UnsubmitReasons
		SET
			reason = #{reason},
			description = #{description},
			lastModifyDate = GETDATE(),
			lastModifyBy = #{lastModifyBy}
		WHERE
			unsubmitReasonID = #{unsubmitReasonID}
	</update>
	<select id="checkExisName" resultType="int">
		<![CDATA[
			SELECT COUNT(reason) FROM UnsubmitReasons where unsubmitReasonID <> #{unsubmitReasonID} AND reason LIKE #{reason}
		]]>
	</select>
</mapper>