<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<script src="<c:url value='/js/jquery.validate.js'/>" type="text/javascript"></script>
<script type="text/javascript">
	$(function() {
		setCookie("action", "delete");
		
        $("#frmAdd").validationEngine();
        
     	// Tabs
		$('#tabs').tabs();
     
		$('.currency, #member, #contractor, #maMember, #maContractor').chosen({allow_single_deselect: true});
	
		$( "#actualStartDate" ).datepicker({
			changeMonth: true,
			onSelect: function() {
				var minDate = $(this).datepicker('getDate');
				minDate.add(1).days();
				$( "#actualEndDate" ).datepicker( "option", "minDate", minDate );
			}
		}).unbind('blur');
		$( "#actualEndDate" ).datepicker({
			changeMonth: true,
			onSelect: function( ) {
				var maxDate = $(this).datepicker('getDate');
				maxDate.add(-1).days();
				$( "#actualStartDate" ).datepicker( "option", "maxDate", maxDate );
			}
		}).unbind('blur');
		$( "#plannedStartDate" ).datepicker({
			changeMonth: true,
			onSelect: function( ) {
				var minDate = $(this).datepicker('getDate');
				minDate.add(1).days();
				$( "#plannedEndDate" ).datepicker( "option", "minDate", minDate );
			}
		}).unbind('blur');
		$( "#plannedEndDate" ).datepicker({
			changeMonth: true,
			onSelect: function( ) {
				var maxDate = $(this).datepicker('getDate');
				maxDate.add(-1).days();
				$( "#plannedStartDate" ).datepicker( "option", "maxDate", maxDate );
			}
		}).unbind('blur');
		
		$( "#maStartDate" ).datepicker({
			changeMonth: true,
			onSelect: function( ) {
				var minDate = $(this).datepicker('getDate');
				minDate.add(1).days();
				$( "#maClosedDate" ).datepicker( "option", "minDate", minDate );
			}
		}).unbind('blur');
		$( "#maClosedDate" ).datepicker({
			changeMonth: true,
			onSelect: function( ) {
				var maxDate = $(this).datepicker('getDate');
				maxDate.add(-1).days();
				$( "#maStartDate" ).datepicker( "option", "maxDate", maxDate );
			}
		}).unbind('blur');
		
		 $('#revenueLicense, #revenueSI, #revenueThirdParty').keyup(function(){
			var revenueLicense = parseFloat($('#revenueLicense').val()), 
				revenueSI = parseFloat($('#revenueSI').val()), 
				revenueThirdParty = parseFloat($('#revenueThirdParty').val());
			$('#revenue').val(revenueLicense + revenueSI + revenueThirdParty);
		}); 
		
		$('#frmAdd').validate();
		
		$('.save, .next').click(function(){
			setTimeout( "jQuery('.tab-confirm').slideDown();",1000 );
		});
		
		$('.cancel').click(function(){
			if(confirm('Are you sure, you want to cancel updating project?'))
			{	
				document.location.href = "<c:url value='/projects/index.html' />";
			}	
		});
		
		$('#employeeID').val('${projectManager}');
		$('#maOwner').val('${maintenanceProjectManager}');
		$('#projectTypeID').val('${project.projectTypeID}');
		if(${project.billable})
		{
			$('#billable').attr('checked', 'checked');
		}
		$('#customerID').val('${project.customerID}');
		$('#currencyID').val('${project.currencyID}');
		if(parseInt('${project.revenueLicense}') > 0)
		{
			$('#revenueLicense').val('${project.revenueLicense}');
		}
		if(parseInt('${project.revenueSI}') > 0)
		{
			$('#revenueSI').val('${project.revenueSI}');
		}
		if(parseInt('${project.revenueThirdParty}') > 0)
		{
			$('#revenueThirdParty').val('${project.revenueThirdParty}');
		}
		if(parseInt('${project.revenue}') > 0)
		{
			$('#revenue').val('${project.revenue}');
		}
		if(parseInt('${project.plannedMM}') > 0)
		{
			$('#plannedMM').val('${project.plannedMM}');
		}
		
		function checkActualStartDate()
		{
			var v = $.trim($('#actualStartDate').val());
			if(! v)
			{
				$('#actualEndDate').val('');
			}	
		}
		
		function checkPlannedStartDate()
		{
			var v = $.trim($('#plannedStartDate').val());
			if(! v)
			{	
				$('#plannedEndDate').val('');
			}	
		}
		
		function checkManStartDate()
		{
			var v = $.trim($('#maStartDate').val());
			if(! v)
			{	
				$('#maClosedDate').val('');
			}	
		}
		
		$('*').bind('hover blur', function(){
			checkActualStartDate();
			checkPlannedStartDate();
			checkManStartDate();
			
			if($('#actualStartDate').val() && $('#actualEndDate').val() && !$.trim($('#closedReason').val()) )
			{
				$('.closeRequire').text('*');
				$('#closedReason').addClass('require validate[required]');
			}
			else
			{
				$('.closeRequire').text('');
				$('#closedReason').removeClass('require validate[required]');
			}	
				
		});
		
		$(document).find('input[readonly=readonly]').keypress(function(e){
			var dis = $(this);
			var code = (e.keyCode ? e.keyCode : e.which);
			if(code == 8 || code == 46) { 
				dis.val("");
			}
		});
		
		if(${project.started})
		{
	//		$('.plan').attr('disabled', 'disabled');
			$('.projectStatus').text('<spring:message code="lbl.started"/>');
		}	
		
		$('.ui-tabs-nav li, .ui-tabs-nav a').click(function(){
			if('${maintenanceProjectManager}')
			{
				$('.mainShow').show();
			}
			else
			{
				$('.mainShow').hide();
			}	
		});
		
		if(${project.finished})
		{
			$('.maintenance').show();
			$('.projectStatus').text('<spring:message code="lbl.finished"/>');
	//		$('.finished').attr('disabled', 'disabled');
	//		$('.finished').css('border', '1px solid #eee');
			$('.finished_required').text('');
	//		$('#member_chzn, #contractor_chzn').addClass('chzn-disabled');
	//		$('#member_chzn a, #contractor_chzn a').remove();
	//		$('#member_chzn, #contractor_chzn').find('.chzn-results').html("");
			$('#isFinished').val(1);
			
			var projectID = $('#projectID').val();
			
			/* $('#maMember_chzn').ready(function(){
				// Delete a maintenance member from table when delete from list
				$('.search-choice-close').live('mouseup', function(){
					var opt = $(this);
					if(opt.parent().attr('id').search('maMember') > -1)
					{
						var i = opt.attr('rel'); i++;
						var v = $('#maMember option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/deleteMultiProjectMemberMa.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
				// Put a maintenance member into project
				$('.result-selected').live('mouseup', function(){
					var opt = $(this);
					if(opt.attr('id').search('maMember') > -1)
					{
						var i = opt.attr('id').replace('maMember_chzn_o_', ''); i++;
						var v = $('#maMember option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/updateMemberMa.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
			});
			
			$('#maContractor_chzn').ready(function(){
				// Delete a maintenance contractor from table when delete from list
				$('.search-choice-close').live('mouseup', function(){
					var opt = $(this);
					if(opt.parent().attr('id').search('maContractor') > -1)
					{	
						var i = opt.attr('rel'); i++;
						var v = $('#maContractor option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/deleteMultiProjectMemberMa.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
				
				// Put a maintenance contractor into project
				$('.result-selected').live('mouseup', function(){
					var opt = $(this);
					if(opt.attr('id').search('maContractor') > -1)
					{
						var i = opt.attr('id').replace('maContractor_chzn_o_', ''); i++;
						var v = $('#maContractor option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/updateMemberMa.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
			});  */
		}
		else
		{
			$('#isFinished').val(0);
			if(! ${project.started})
			{
				$('.projectStatus').text('<spring:message code="lbl.planned"/>');
			}
			$('.maintenance').remove();

			var projectID = $('#projectID').val();
			
			/* $('#member_chzn').ready(function(){
				// Delete a member from table when delete from list
				$('.search-choice-close').live('mouseup', function(){
					var opt = $(this);
					if(opt.parent().attr('id').search('member') > -1)
					{
						var i = opt.attr('rel'); i++;
						var v = $('#member option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/deleteMultiProjectMember.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
				// Put a member into project
				$('.result-selected').live('mouseup', function(){
					var opt = $(this);
					if(opt.attr('id').search('member') > -1)
					{
						var i = opt.attr('id').replace('member_chzn_o_', ''); i++;
						var v = $('#member option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/updateMember.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
			});
			
			$('#contractor_chzn').ready(function(){
				// Delete a contractor from table when delete from list
				$('.search-choice-close').live('mouseup', function(){
					var opt = $(this);
					if(opt.parent().attr('id').search('contractor') > -1)
					{	
						var i = opt.attr('rel'); i++;
						var v = $('#contractor option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/deleteMultiProjectMember.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
				
				// Put a contractor into project
				$('.result-selected').live('mouseup', function(){
					var opt = $(this);
					if(opt.attr('id').search('contractor') > -1)
					{
						var i = opt.attr('id').replace('contractor_chzn_o_', ''); i++;
						var v = $('#contractor option:nth-child('+i+')').val();
						$.ajax({
							type: 'POST'
							,url: '<c:url value="/project-member/updateMember.html" />'
							,data: 'projectID='+projectID+'&employeeID='+v
						});
					}	
				});
			}); */
			
		}	
		
		if(${project.maClosed})
		{
			$('.projectMaintenance').text('<spring:message code="lbl.yes"/>');
	//		$('.maintenance').find('input').attr('disabled', 'disabled');
	//		$('.main').attr('disabled', 'disabled');
	//		$('.main').css('border', '1px solid #eee');
	//		$('#maMember_chzn a, #maContractor_chzn a').remove();
	//		$('#maMember_chzn, #maContractor_chzn').find('.chzn-results').html("");
	//		$('.maintenance').find('input').css('border', '1px solid #eee');
	//		$('#maMember_chzn, #maContractor_chzn').addClass('chzn-disabled');
			
		}	
		else
		{
			$('.projectMaintenance').text('<spring:message code="lbl.no"/>');
		}	
		
		$('#maMember, #maContractor, #member, #contractor').removeClass('require');
		
		/* if('${userRole}' == 'ROL02')
		{ 
			$('#employeeID').val('${user}');
			$('.ui-tabs-nav').find('a[href=#tabs-1]').hide();
			$('.ui-tabs-nav').find('a[href=#tabs-2]').click();
		 } */
		
	});
	
	function update()
	{
		$('*').removeAttr('disabled');
	}
</script>

<div class="adminform">
	<div class="opr">
		<div class="message-alert tab-confirm" style="display:none;">
			<div class="message-invalid">
				<img align="absmiddle" alt="" src="/pms/images/icon/error.png"><spring:message code="lbl.input_all_tab"/>
			</div>	
		</div>
		<div id="tabs">
		<form action="<c:url value='/projects/doUpdate.html' />" id='frmAdd' method="post" onsubmit="return update();">
		<input type="hidden" value="${projectID}" name="projectID" id="projectID"/>
		<input type="hidden" name="isFinished" id="isFinished"/>
		<input type="hidden" name="isMaintenanceClosed" id="isMaintenanceClosed"/>
		<input type="hidden" name="PMOldID" id="PMOldID" value="${projectManager}"/>
		<input type="hidden" name="OwnerOldID" id="OwnerOldID" value="${maintenanceProjectManager}"/>
		<fieldset>
			<legend><spring:message code="lbl.update_project"/></legend>
			<div style='padding: 5px;'><b style='color: blue;'><spring:message code="lbl.project_status"/>:</b> <span style="color:red;" class='projectStatus'></span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <b style='color: blue;'><spring:message code="lbl.main_is_close"/>:</b> <span style="color:red;" class='projectMaintenance'></span></div>	
			<ul>
				<li><a href="#tabs-1"><spring:message code="th.pm"/></a></li>
				<li><a href="#tabs-2"><spring:message code="lbl.project_info"/></a></li>
				<li><a href="#tabs-3"><spring:message code="lbl.schedule"/></a></li>
				<li><a href="#tabs-4"><spring:message code="lbl.member"/></a></li>
			</ul>
			<div id="tabs-1">
				<h3><spring:message code="lbl.select_pm"/></h3>
				<table class="form" cellspacing="0" cellpadding="0" >
					<tr class='maintenance' >
						<td style="width: 170px;">	
						    <label for="employeeID"><spring:message code="lbl.maintenance_owner"/></label>
						</td>
						<td style="width: 250px;">
							<spring:message code="lbl.select_owner" var="select_owner"/>
							<%-- <jsp:include page="/employees/selectEmployeeList.html?roleID=ROL02&id=maOwner&placeholder=${select_owner}"></jsp:include> --%>
							<jsp:include page="/employees/selectEmployeeList.html?id=maOwner&placeholder=${select_owner}"></jsp:include>
						</td>
					</tr>
				</table>
				<table class="form" cellspacing="0" cellpadding="0" >
					<tr>
						<td style="width: 170px;">
						    <label for="employeeID"><spring:message code="th.pm" /></label>
						</td>
						<td style="width: 250px;">
							<spring:message code="lbl.select_a_pm" var="select_a_pm" />
							<span class="red finished_required">*</span>
							<%-- <jsp:include page="/employees/selectEmployeeList.html?roleID=ROL02&id=employeeID&placeholder=${select_a_pm}&validate=required&finished=finished&require=require"></jsp:include> --%>
							<jsp:include page="/employees/selectEmployeeList.html?id=employeeID&placeholder=${select_a_pm}&validate=required&finished=finished&require=require"></jsp:include>
						</td>
					</tr>
				</table>
				<div style='padding: 15px 0 0;'>
					<button class="next"><spring:message code="button.update"/></button>
					<button class="cancel"><spring:message code="button.cancel"/></button>
				</div>
			</div>
			<div id="tabs-2">
				<h3><spring:message code="lbl.enter_project_info"/></h3>
				<table class="form" cellspacing="0" cellpadding="0">
					<tr>
						<td>
							<table class="form" cellspacing="0" cellpadding="0" >
								<tr>
									<td style="width: 120px;">
									    <label for="projectName"><spring:message code="th.name"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<span class="red finished_required">*</span><input type="text" value="${project.projectName}" name="projectName" id="projectName" class="require textfield validate[required, ajax[ajaxCheckProjectUpdate], maxSize[50]] finished" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="projectTypeID"><spring:message code="th.type"/></label>
									</td>
									<td style="width: 250px;padding-top: 6px;" class='input'>
										<span class="red finished_required">*</span><jsp:include page="/project-types/selectProjectTypeList.html"></jsp:include>
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="billable"><spring:message code="lbl.billable"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input type="checkbox" name="billable" id="billable" class="input finished" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="customerID"><spring:message code="th.customer"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<span class="red finished_required">*</span><jsp:include page="/customers/selectCustomerList.html"></jsp:include>
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="revenue"><spring:message code="lbl.currency_type"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<jsp:include page="/currency/selectCurrencyList.html"></jsp:include>
									</td>
								</tr>
								<tr>	
									<td style="width: 120px;">
									    <label for="description"><spring:message code="lbl.description"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<textarea name="description" id="description" class="textarea finished" style="width: 100%;">${project.description}</textarea>
									</td>
								</tr>
							</table>
						</td>
						<td valign="top">
							<table class="form" cellspacing="0" cellpadding="0">
								<tr>
									<td style="width: 120px;">
									    <label for="revenueLicense"><spring:message code="lbl.revenue_license"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input value="0" type="text" name="revenueLicense" id="revenueLicense" class="decimal textfield  validate[custom[number]] finished" style="" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="revenueSI"><spring:message code="lbl.revenue_si"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input value="0" type="text" name="revenueSI" id="revenueSI" class="decimal textfield validate[custom[number]] finished" style="" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="revenueThirdParty"><spring:message code="lbl.third_party_revenue"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input value="0" type="text" name="revenueThirdParty" id="revenueThirdParty" class="decimal textfield validate[custom[number]] finished" style="" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="revenue"><spring:message code="lbl.revenue"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input value="0" readonly="readonly" type="text" name="revenue" id="revenue" class="decimal textfield validate[custom[number]] finished" style="" />
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
				<div style='padding: 15px 0 0;'>
					<button class="next"><spring:message code="button.update"/></button>
					<button class="cancel"><spring:message code="button.cancel"/></button>
				</div>
			</div>
			<div id="tabs-3">
				<h3><spring:message code="lbl.enter_project_schedule"/></h3>
				<table class="form" cellspacing="0" cellpadding="0">
					<tr>
						
						<td valign="top">
							<table class="form" cellspacing="0" cellpadding="0">
								<tr style="display: none;" class='maintenance mainShow'>
									<td style="width: 150px;">
									    <label for="maStartDate"><spring:message code="lbl.main_start_date"/></label>
									</td>
									<td style="width: 250px;" class='input maintenance'>
										<input type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${project.maStartDate}'/>" name="maStartDate" id="maStartDate" class="textfield" readonly="readonly"/>
									</td>
								</tr>
								<tr style="display: none;" class='maintenance mainShow'>
									<td style="width: 150px;">
									    <label for="maClosedDate"><spring:message code="lbl.main_end_date"/></label>
									</td>
									<td style="width: 250px;" class='input maintenance'>
										<input type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${project.maClosedDate}'/>" name="maClosedDate" id="maClosedDate" class="textfield" readonly="readonly" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="actualMM"><spring:message code="th.actual_man_month"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input type="text" name="actualMM" id="actualMM" class="integer textfield validate[custom[number]] finished" value="0" />
									</td>
								</tr>
								<tr>
									<td style="width: 130px;">
									    <label for="additionalInternalMM"><spring:message code="lbl.addtional_internal_mm"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input value="0" type="text" name="additionalInternalMM" id="additionalInternalMM" class="integer textfield validate[custom[number]] finished" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="actualStartDate"><spring:message code="th.actual_start_date"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${project.actualStartDate}'/>" name="actualStartDate" readonly="readonly" id="actualStartDate" class="textfield validate[custom[date]] finished" style="" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="actualEndDate"><spring:message code="th.actual_end_date"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${project.actualEndDate}'/>" name="actualEndDate" readonly="readonly" id="actualEndDate" class="textfield validate[custom[date]] finished" style="" />
									</td>
								</tr>
							</table>
						</td>
						<td valign="top">
							<table class="form" cellspacing="0" cellpadding="0" >
								<tr>
									<td style="width: 120px;height: 37px;">
									    <label for="closedReason"><spring:message code="lbl.close_reason"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<span class="red closeRequire"></span><input type="text" value="${project.closedReason}" name="closedReason" id="closedReason" class="textfield finished" style="" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="plannedStartDate"><spring:message code="lbl.plan_start_date"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${project.plannedStartDate}'/>" readonly="readonly" name="plannedStartDate" id="plannedStartDate" class="textfield validate[custom[date]] plan finished" style="" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="plannedEndDate"><spring:message code="lbl.plan_end_date"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${project.plannedEndDate}'/>" readonly="readonly" name="plannedEndDate" id="plannedEndDate" class="textfield validate[custom[date]] plan finished" style="" />
									</td>
								</tr>
								<tr>
									<td style="width: 120px;">
									    <label for="plannedMM"><spring:message code="lbl.plan_men_month"/></label>
									</td>
									<td style="width: 250px;" class='input'>
										<input value="0" type="text" value="" name="plannedMM" id="plannedMM" class="decimal textfield validate[custom[number]] plan finished" />
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
				<div style='padding: 15px 0 0;'>
					<button class="next"><spring:message code="button.update"/></button>
					<button class="cancel"><spring:message code="button.cancel"/></button>
				</div>
			</div>
			<div id="tabs-4">
				<h3><spring:message code="lbl.select_member_contractor"/></h3>
				<table class="form" cellspacing="0" cellpadding="0">
					<tr style="display: none;" class='maintenance mainShow'>
						<td style="width: 135px;height: 50px;">
						    <label for="maMember"><spring:message code="lbl.main_member"/></label>
						</td>
						<td style="width: 250px;" class='input'>
							<spring:message code="lbl.select_main_member" var="select_main_member"/>
							<%-- <jsp:include page="/employees/selectEmployeeList.html?roleID=ROL03&type=employee&id=maMember&placeholder=${select_main_member}&multiple=true&finished=main"></jsp:include> --%>
							<jsp:include page="/employees/selectEmployeeList.html?type=employee&id=maMember&placeholder=${select_main_member}&multiple=true&finished=main"></jsp:include>
						</td>
					</tr>
					<tr style="display: none;" class='maintenance mainShow'>
						<td style="width: 150px;height: 50px;">
						    <label for="maContractor"><spring:message code="lbl.main_contractor"/></label>
						</td>
						<td style="width: 250px;" class='input'>
							<spring:message code="lbl.select_main_contractor" var="select_main_contractor"/>
							<%-- <jsp:include page="/employees/selectEmployeeList.html?roleID=ROL03&type=contractor&id=maContractor&placeholder=${select_main_contractor}&multiple=true&finished=main"></jsp:include> --%>
							<jsp:include page="/employees/selectEmployeeList.html?type=contractor&id=maContractor&placeholder=${select_main_contractor}&multiple=true&finished=main"></jsp:include>
						</td>
					</tr>
					<tr>
						<td style="width: 100px;">
						    <label for="member"><spring:message code="lbl.member"/></label>
						</td>
						<td style="width: 250px;height: 50px;" class='input'>
							<spring:message code="lbl.select_member" var="select_member"/>
							<%-- <jsp:include page="/employees/selectEmployeeList.html?roleID=ROL03&type=employee&id=member&placeholder=${select_member}&multiple=true"></jsp:include> --%>
							<jsp:include page="/employees/selectEmployeeList.html?type=employee&id=member&placeholder=${select_member}&multiple=true"></jsp:include> 
						</td>
					</tr>
					<tr>
						<td style="width: 100px;height: 50px;">
						    <label for="contractor"><spring:message code="lbl.contractor"/></label>
						</td>
						<td style="width: 250px;" class='input'>
							<spring:message code="lbl.select_contractor" var="select_contractor"/>
							<%-- <jsp:include page="/employees/selectEmployeeList.html?roleID=ROL03&type=contractor&id=contractor&placeholder=${select_contractor}&multiple=true"></jsp:include> --%>
							<jsp:include page="/employees/selectEmployeeList.html?type=contractor&id=contractor&placeholder=${select_contractor}&multiple=true"></jsp:include>
						</td>
					</tr>
				</table>
				<div style='padding: 15px 0 0;'>
					<div class="message-invalid" style="color: red;">
						<spring:message code="lbl.project_note"/>
					</div>
					<button class="save"><spring:message code="button.update"/></button>
					<button class="cancel"><spring:message code="button.cancel"/></button>
				</div>
			</div>
		</fieldset>	
		</form>	
		</div>
	</div>
</div>
<div class="clr"></div>
<script>
	<c:forEach var="member" items="${projectMembers}" varStatus="status">
		$('#member').find('option[value="${member.employeeID}"]').attr('selected', 'selected');
	</c:forEach>
	<c:forEach var="contractor" items="${projectContractors}" varStatus="status">
		$('#contractor').find('option[value="${contractor.employeeID}"]').attr('selected', 'selected');
	</c:forEach>
	
	<c:forEach var="member" items="${maintenanceProjectMembers}" varStatus="status">
	$('#maMember').find('option[value="${member.employeeID}"]').attr('selected', 'selected');
	</c:forEach>
	<c:forEach var="contractor" items="${maintenanceProjectContractors}" varStatus="status">
		$('#maContractor').find('option[value="${contractor.employeeID}"]').attr('selected', 'selected');
	</c:forEach>
	
</script>