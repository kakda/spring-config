<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>

<script type="text/javascript">
	$(document).ready(function() {
		
		setCookie("action", "delete");
		
		
	  	$("#joinDate").datepicker();
	  	$("#quitDate").datepicker();
	  	$("#titleID").val('${employee.titleID}').trigger("change");
	  	$("#roleID").val('${employee.roleID}').trigger("change");
	  	$("#teamID").val('${employee.teamID}').trigger("change");
		$("#frmUpdate").validationEngine();
		$(".cancel").click(function(event){
			event.preventDefault();
			$(location).attr('href',"<c:url value='/employees/index.html'/>");
		});
		$("#checkbox").click(function(){
			if ($(this).is(':checked')){
				$('#quitDate').removeAttr('disabled');
				$('#reasontable').show('slow');
			}
			else{
				$('#quitDate').attr('disabled','disabled');
				$('#quitDate').val("");
				$('#reasontable').hide('slow');
			}
		});
		
		if($('#quitDate').val()!=""){
			$("#checkbox").attr('checked','checked');
		}
		else{
			$('#quitDate').attr('disabled','disabled');
			$('#reasontable').hide('slow');
		}
	});
	
</script>


	
<div class="adminform">
   <div class="break-crumbs">
		<a href="<c:url value='/employees/index.html' />">
		<img src="<c:url value='/images/icon/list.png' />" align="absmiddle" alt="" /><spring:message code='lbl.employee_list'/>
		</a>
	</div>
   <div class="opr">
      <form action="<c:url value='/employees/doUpdate.html'/>" id="frmUpdate" method="post">
         <fieldset>
            <legend><spring:message code='lbl.add_new_employee'/></legend>
            <table class="form" cellspacing="0" cellpadding="0">
            	<input type="hidden" name="employeeID" id="employeeID" value="${employee.employeeID}"/>
               <tr>
                  <td class="label"><label for="employeeName"><spring:message code='th.employee_name'/></label><span class="required">*</span></td>
                  
                  <td class="input">
                     <input id="employeeName" name="employeeName" class="textfield employeeName validate[required,maxSize[50],ajax[ajaxCheckUserUpdate]]" type="text" value="${employee.employeeName}"/>
                  </td>
               </tr>
               
                <tr>
                  <td class="label"><label for="title"><spring:message code='th.title'/></label></td>
                  <td class="input">
                  	<spring:message code="select.select_title" var="select_title" />
                     <jsp:include page="/titles/selectTitleList.html?id=titleID&placeholder=${select_title}&width=250px"></jsp:include>
                  </td>
                  
                  <td class="label"><label for="role"><spring:message code='th.role'/></label></td>
                  <td class="input">
                  	<spring:message code="select.select_role" var="select_role" />
                  	<jsp:include page="/roles/selectRoleList.html?id=roleID&placeholder=${select_role}&width=250px"></jsp:include>
                  </td>
               </tr>
               
               <tr style="vertical-align: top;">
                  <td class="label"><label for="skill"><spring:message code='th.skill'/></label></td>
                  <td class="input">
                  <spring:message code="select.select_skills" var="select_skills" />
                  <jsp:include page="/skills/selectSkillList.html?id=skillID&placeholder=${select_skills}&multiple=true"></jsp:include></td>
               </tr>
               
               
               <tr>
                  <td class="label"><label for="team"><spring:message code='th.team'/></label></td>
                  <td class="input">
                  	<spring:message code="select.select_team" var="select_team" />
                     <jsp:include page="/teams/selectTeamList.html?id=teamID&placeholder=${select_team}&width=250px"></jsp:include>
                  </td>
                  <td class="label" ><label for="email"><spring:message code='th.email'/></label><span class="required">*</span></td>
                  <td class="input "><input id="email" name="email" class="textfield email validate[required,custom[email]]" type="text" value="${employee.email}"/></td>
                </tr>
               
               
               <tr>
                  <!-- <td class="label"><label for="title">Company</label><span class="required">*</span></td>
                  <td class="input">
                  	<input id="companyName" name="companyName" class="textfield companyName validate[required,maxSize[50],ajax[ajaxCheckEmployee]]" type="text" />
                  </td> -->
                  <td class="label"><label for="mobile"><spring:message code='lbl.mobile_phone'/></label><span class="required">*</span></td>
                  <td class="input">
                  	<input id="mobilePhone" name="mobilePhone" class="textfield mobile validate[required]" type="text" value="${employee.mobilePhone}"/>
                  </td>
                  <td class="label">
                  	<label for="companyPhone"><spring:message code='lbl.company_phone'/></label>
                  </td>
                  <td class="input">
                  	<input id="companyPhone" name="companyPhone" class="textfield companyPhone" type="text" value="${employee.companyPhone}"/>
                  </td>
               </tr>
               
           
               
               <tr style="vertical-align: top;">
                  <td class="label"><label for="address"><spring:message code='lbl.address'/></label></td>
                  <td colspan="4" class="input">
                  <input id="address" name="address" class="textfield address" type="text" value="${employee.address}"/></td>
               </tr>
               
              
               
               <tr>
                  <td class="label"><label for="joinDate"><spring:message code='th.join_date'/></label><span class="required">*</span></td>
                  <td class="input">
                  	<input id="joinDate" name="joinDate" class="textfield date joinDate validate[required,maxSize[50],custom[date]]" type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${employee.joinDate}'/>"/>
                  </td>
                   <td class="label" style="position: absolute; margin: 5px 0 0 5px;"><input type="checkbox" id="checkbox" />
                  <td class="label" style="position: absolute; margin: 5px 0 0 40px;"><label for="quitDate"><spring:message code='th.quit_date'/></label><span class="required"></span></td>
                  <td class="input">
                  	<input id="quitDate" name="quitDate" class="textfield date quitDate validate[custom[date]]" type="text" value="<fmt:formatDate pattern="yyyy-MM-dd" value='${employee.quitDate}'/>"/>
                  </td>
               </tr>
               
               <tr id="reasontable">
               	<td class="label"><lable for="reason"><spring:message code='lbl.reason'/></lable></td>
               	<td class="input"><textarea id="reason" name="quitReason" style="width: 240px;" class="validate[condRequired[quitDate]]">${employee.quitReason}</textarea></td>
               </tr>
               <tr>
                  <td colspan="6" class="button">
                     <button class="save" name="save" value="save"><spring:message code='button.save'/></button>
                     <button class="cancel" name="save" value=""><spring:message code='button.cancel'/></button>
                  </td>
               </tr>
            </table>
         </fieldset>
      </form>
   </div>
</div>
<div class="clr"></div>


<script>
	<c:forEach var="skill" items="${skill}" varStatus="status">
		$('#skillID').find('option[value="${skill.skillID}"]').attr('selected', 'selected');
		//$('#skillID').val('${skill.skillID}').trigger("change");
	</c:forEach>
</script>